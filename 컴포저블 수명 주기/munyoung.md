# 컴포저블 수명 주기

## 수명 주기 개요
Compose는 초기 컴포지션 시 처음으로 컴포저블을 실행할 때 컴포지션에서 UI를 기술하기 위해 호출하는 컴포저블을 추적합니다. 
그런 다음 상태가 변경되면 Compose는 리컴포지션을 예약합니다. 리컴포지션은 Compose가 상태 변경사항에 따라 변경될 수 있는 컴포저블을 
다시 실행한 다음 변경사항을 반영하도록 컴포지션을 업데이트하는 것입니다.

컴포지션을 수정하는 유일한 방법은 리컴포지션을 통하는 것입니다.

리컴포지션은 일반적으로 State 객체가 변경되면 트리거됩니다. 
Compose는 이러한 객체를 추적하고 컴포지션에서 특정 State를 읽는 모든 컴포저블 및 호출하는 컴포저블 중 건너뛸 수 없는 모든 컴포저블을 실행합니다.

또한 컴포즈는 각 인스턴스별 수명주기를 가지고 있습니다.

## 컴포지션 내 컴포저블의 분석
컴포지션 내 컴포저블의 인스턴스는 호출 사이트로 식별됩니다.  호출사이트란 컴포저블이 호출되는 소스코드 위치를 뜻하며, Compose 컴파일러는 각 호출 사이트를 고유한 것으로 간주하여 여러 호출 사이트에서 컴포저블을 호출하면 컴포지션에 컴포저블의 여러 인스턴스가 생성됩니다.

Compose는 리컴포지션시 인스턴스가 이전에 호출되거나 호출 되지 않음을 식별하여 입력이 변경된 경우에만 위젯을 재구축 합니다.

## 스마트 리컴포지션에 도움이 되는 정보 추가
일반적인 리컴포지션은 입력한 값에 변화가 없으면 인스턴스가 재구축되지 않지만 리스트는 리스트의 제일 앞이나 중간에 새로운 인스턴스가 들어갈시
모든 리스트의 인스턴스가 새로운 인스턴스로 재구축이 되며 이러한 것을 막기위해서는 Key를 이용하여 식별하는데 사용할 값을 주면 해결할수있다.

## 입력이 변경되지 않은 경우 건너뛰기
컴포지션에 이미 컴포저블이 있는 경우 모든 입력이 안정적이고 변경되지 않았으면 리컴포지션을 건너뛸 수 있습니다.
안정적인 유형은 다음을 지켜야합니다.
- 두 인스턴스의 equals 결과가 동일한 두 인스턴스의 경우 항상 동일합니다.
- 유형의 공개 속성이 변경되면 컴포지션에 알림이 전송됩니다.
- 모든 공개 속성 유형도 안정적입니다.
@Stable 주석을 사용하여 안정적이라고 간주하게 만들수 있습니다. 여기에 중요한 일반 유형으로는
- 모든 원시 값 유형: Boolean, Int, Long, Float, Char 등
- 문자열
- 모든 함수 유형(람다)
이 유형은 모두 변경 불가능하여 @Stable을 조금더 잘사용할수있습니다.
또한 안정적이지만 변경 가능한 유형으로는 MutableState유형입니다.  또한 이러한 유형은 리컴포지션이 일어났을경우 변경되었는지 확인 됩니다.
